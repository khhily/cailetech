# 彩乐彩票服务器
![输入图片说明](https://gitee.com/uploads/images/2018/0119/105749_c8e42406_1700303.png "caile-lottery.png")

彩乐彩票是国内第一个免费，开源的完整的彩票实时聊天+购彩解决方案。目前支持的彩种有7个：双色球，超级大乐透，山东11选5，湖北11选5，江西快三，吉林快三，重庆时时彩。其他流行的20多个彩种如竞彩足球、竞彩篮球、老足彩、北京单场、七星彩、七乐彩、福彩3D，排列3、排列5等彩种已列入开发计划中，后续将陆续开放。


 **项目起源** 

老彩民在线下购买彩票时，都会在彩票店看走势图，和周围经常买彩的彩友一起看走势图、一起讨论这一期会开什么号码，什么样的方法可以提高中奖率，竞彩彩民更是如此。同一个彩票店经常买彩票的大家都认识，时间长了形成彩民圈子。彩乐彩票就是将购买彩票、看彩票走势图、彩票专家预测、赛事分析、即时聊天、高手跟单6大场景进行整合，为广大彩友推出的集6大需求为一体的一站式即时聊天购彩社区。

 **系统特点** 
彩乐彩票一站式即时聊天购彩社区解决方案采用分布式、异步插件式架构。
.	采用微软当前最成熟稳定的.NET FRAMEWORK 4.6.1
. 	模块化设计，系统易于扩展和极其灵活
.	Redis高速缓存
.	基于MSMQ的高速队列，可以响应上千的消息并发请求
.	关键的业务均采用双通道机制，确保其中一个通道宕机后，能够及时的切换到另外的通道上


在不影响到原有业务的情况下，遵循平台的规范协议，可以轻松的接入新的彩种，一个新的彩种1个星期就可以上线。

 **技术架构** 

 **业务系统：** 
	采用微软最新的数据库 SqlServer2014 Enterprise，缓存使用Redis实现，模块通信使用消息队列MSMQ实现（未来将采用RabbitMQ替换）。主要的业务模块下单、拆票、出票、算奖、返奖。

 **聊天系统：** 
	采用成熟的跨平台解决方案Workman，通信接口使用PHPSocket.IO实现。
	PHPSocket.IO是PHP版本的Socket.IO服务端实现，基于workerman开发，用于替换node.js版本Socket.IO服务端。PHPSocket.IO底层采用websocket协议通讯，如果客户端不支持websocket协议， 则会自动采用http长轮询的方式通讯。PHPSocket.IO实现的Polling通信机制包括Adobe Flash Socket、AJAX长轮询、JSONP轮询等。具体采用哪种机制通讯对于开发者完全透明， 开发者使用的是统一的接口。
